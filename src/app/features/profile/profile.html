<!-- <app-header></app-header>

<main class="content" *ngIf="user$ | async as user; else notLogged">
  <section class="profile-info">
    <h1 class="profile-title">Mon profil</h1>
    <p><strong>Nom :</strong> {{ user.name }}</p>
    <p><strong>Email :</strong> {{ user.email }}</p>

    <button class="btn-logout" (click)="logout()">Se déconnecter</button>
  </section>


  <section class="profile-orders" *ngIf="orders$ | async as orders">
    <h2 class="orders-title">Mes commandes</h2>

    <empty-state *ngIf="orders.length === 0">
      <span>Aucune commande pour l’instant.</span>
    </empty-state>

    <div class="orders-list" *ngIf="orders.length > 0">
      <div *ngFor="let order of orders" class="order-card">
        <h3>Commande #{{ order.id }}</h3>
        <p>Date : {{ order.date | date:'longDate' }}</p>
        <p>Total : {{ order.total | price }}</p>
        <ul>
          <li *ngFor="let line of order.lines">
            {{ line.quantity }} × {{ line.productName }}
          </li>
        </ul>
      </div>
    </div>
  </section>
</main>

<ng-template #notLogged>
  <empty-state>
    <span>Vous devez être connecté pour accéder à votre profil.</span>
    <button routerLink="/login" class="btn-login">Se connecter</button>
  </empty-state>
</ng-template>

 -->


<main class="content" *ngIf="user$ | async as user; else notLogged">
  <!-- Infos utilisateur -->
  <section class="profile-info">
    <h1 class="profile-title">Mon profil</h1>
    <p><strong>Nom :</strong> {{ user.name }}</p>
    <p><strong>Email :</strong> {{ user.email }}</p>

    <button class="btn-logout" (click)="logout()">Se déconnecter</button>
  </section>

  <!-- Commandes -->
  <section class="profile-orders" *ngIf="orders$ | async as orders">
    <h2 class="orders-title">Mes commandes</h2>

    <empty-state *ngIf="orders.length === 0">
      <span>Aucune commande pour l’instant.</span>
    </empty-state>

    <div class="orders-list" *ngIf="orders.length > 0">
      <div *ngFor="let order of orders" class="order-card">
        <h3>Commande #{{ order.id }}</h3>
        <p>Date : {{ order.createdAt | date:'longDate' }}</p>
        <p>Total : {{ order.total | price }}</p>
        <ul>
          <li *ngFor="let product of order.items">
            {{ product.name }} - {{ product.price | price }}
          </li>
        </ul>
      </div>
    </div>
  </section>
</main>

<!-- Cas non connecté -->
<ng-template #notLogged>
  <empty-state>
    <span>Vous devez être connecté pour accéder à votre profil.</span>
    <button routerLink="/login" class="btn-login">Se connecter</button>
  </empty-state>
</ng-template>
